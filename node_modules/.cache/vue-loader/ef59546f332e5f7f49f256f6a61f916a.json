{"remainingRequest":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\addUserImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\addUserImage.vue","mtime":1622539274161},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBmYWNlYXBpIGZyb20gImZhY2UtYXBpLmpzIjsNCmZhY2VhcGkuZW52Lm1vbmtleVBhdGNoKHsNCiAgQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwNCiAgSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsDQogIEltYWdlRGF0YTogSW1hZ2VEYXRhLA0KICBWaWRlbzogSFRNTFZpZGVvRWxlbWVudCwNCiAgY3JlYXRlQ2FudmFzRWxlbWVudDogKCkgPT4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksDQogIGNyZWF0ZUltYWdlRWxlbWVudDogKCkgPT4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIiksDQp9KTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImFkZFVzZXJJbWFnZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzbG9hZGVkOiBmYWxzZSwNCiAgICAgIGZpbGVzOiBbXSwNCiAgICAgIGRlc2NyaXB0b3JzanNvbjogW10sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHByZXZpZXdQaWNzKCkgew0KICAgICAgdGhpcy5nZXREZXNjcmlwdG9yKCk7DQogICAgICAvKnZhciBvdXRwdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3V0cHV0Iik7DQogICAgICBvdXRwdXQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldmVudC50YXJnZXQuZmlsZXNbMF0pOw0KICAgICAgb3V0cHV0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChvdXRwdXQuc3JjKTsNCiAgICAgIH07Ki8NCiAgICB9LA0KICAgIGFzeW5jIGdldERlc2NyaXB0b3IoKSB7DQogICAgICAvLyBjb25zdCBpbWFnZXVwbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZWZpbGVzJykNCiAgICAgIGZvciAoDQogICAgICAgIGxldCBpbmRleCA9IDA7DQogICAgICAgIGluZGV4IDwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltYWdlZmlsZXMiKS5maWxlcy5sZW5ndGg7DQogICAgICAgIGluZGV4KysNCiAgICAgICkgew0KICAgICAgICBjb25zdCB0b2ltYWdlID0gYXdhaXQgZmFjZWFwaS5idWZmZXJUb0ltYWdlKA0KICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbWFnZWZpbGVzIikuZmlsZXNbaW5kZXhdDQogICAgICAgICk7DQoNCiAgICAgICAgY29uc3QgZGV0ZWN0aW9uID0gYXdhaXQgZmFjZWFwaQ0KICAgICAgICAgIC5kZXRlY3RTaW5nbGVGYWNlKHRvaW1hZ2UpDQogICAgICAgICAgLndpdGhGYWNlTGFuZG1hcmtzKCkNCiAgICAgICAgICAud2l0aEZhY2VEZXNjcmlwdG9yKCk7DQogICAgICAgIHRoaXMuZGVzY3JpcHRvcnNqc29uLnB1c2goDQogICAgICAgICAgSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShkZXRlY3Rpb24uZGVzY3JpcHRvcikpDQogICAgICAgICk7DQogICAgICAgIHRvaW1hZ2UuY2xhc3NOYW1lID0gImltZy1mbHVpZCBpbWctdGh1bWJuYWlsIGZsb2F0LWxlZnQgcm91bmRlZCI7DQogICAgICAgIGNvbnN0IG91dHB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdXRwdXQiKTsNCiAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKHRvaW1hZ2UpOw0KICAgICAgfQ0KICAgICAgdGhpcy4kZW1pdCgiYWxsaW1ndXBsb2FkZWQiLCB0aGlzLmRlc2NyaXB0b3JzanNvbik7DQogICAgICB0aGlzLmRlc2NyaXB0b3JzanNvbiA9IFtdOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgUHJvbWlzZS5hbGwoWw0KICAgICAgZmFjZWFwaS5uZXRzLmZhY2VMYW5kbWFyazY4TmV0LmxvYWRGcm9tVXJpKCIvbW9kZWxzIiksDQogICAgICBmYWNlYXBpLm5ldHMuZmFjZVJlY29nbml0aW9uTmV0LmxvYWRGcm9tVXJpKCIvbW9kZWxzIiksDQogICAgICBmYWNlYXBpLm5ldHMuc3NkTW9iaWxlbmV0djEubG9hZEZyb21VcmkoIi9tb2RlbHMiKSwNCiAgICBdKS50aGVuKCgpID0+IHsNCiAgICAgIHRoaXMuaXNsb2FkZWQgPSB0cnVlOw0KICAgIH0pOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["addUserImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addUserImage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container-fluid rounded\">\r\n      <div\r\n        class=\"container-fluid text-dark px-2 my-1\"\r\n        style=\"background-color: #ededee\"\r\n      >\r\n        <h4>Please Insert 3 photos</h4>\r\n        <p>\r\n          (All facial features <strong>must be visibe</strong> to the Camera)\r\n        </p>\r\n      </div>\r\n      <div>\r\n        <input\r\n          class=\"form-control\"\r\n          v-show=\"isloaded\"\r\n          type=\"file\"\r\n          id=\"imagefiles\"\r\n          ref=\"myfiles\"\r\n          @change=\"previewPics\"\r\n          multiple\r\n          accept=\"image/*,.jpg,.jpeg,.png\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-center py-1 px-5\">\r\n      <div class=\"user_card px-5 py-4 mx-5\" style=\"background-color: #ffffff\">\r\n        <div class=\"d-flex justify-content-center pb-3\">\r\n          <div id=\"output\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as faceapi from \"face-api.js\";\r\nfaceapi.env.monkeyPatch({\r\n  Canvas: HTMLCanvasElement,\r\n  Image: HTMLImageElement,\r\n  ImageData: ImageData,\r\n  Video: HTMLVideoElement,\r\n  createCanvasElement: () => document.createElement(\"canvas\"),\r\n  createImageElement: () => document.createElement(\"img\"),\r\n});\r\nexport default {\r\n  name: \"addUserImage\",\r\n  data() {\r\n    return {\r\n      isloaded: false,\r\n      files: [],\r\n      descriptorsjson: [],\r\n    };\r\n  },\r\n  methods: {\r\n    previewPics() {\r\n      this.getDescriptor();\r\n      /*var output = document.getElementById(\"output\");\r\n      output.src = URL.createObjectURL(event.target.files[0]);\r\n      output.onload = function () {\r\n        URL.revokeObjectURL(output.src);\r\n      };*/\r\n    },\r\n    async getDescriptor() {\r\n      // const imageupload = document.getElementById('imagefiles')\r\n      for (\r\n        let index = 0;\r\n        index < document.getElementById(\"imagefiles\").files.length;\r\n        index++\r\n      ) {\r\n        const toimage = await faceapi.bufferToImage(\r\n          document.getElementById(\"imagefiles\").files[index]\r\n        );\r\n\r\n        const detection = await faceapi\r\n          .detectSingleFace(toimage)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor();\r\n        this.descriptorsjson.push(\r\n          JSON.stringify(Array.from(detection.descriptor))\r\n        );\r\n        toimage.className = \"img-fluid img-thumbnail float-left rounded\";\r\n        const output = document.getElementById(\"output\");\r\n        output.appendChild(toimage);\r\n      }\r\n      this.$emit(\"allimguploaded\", this.descriptorsjson);\r\n      this.descriptorsjson = [];\r\n    },\r\n  },\r\n  created() {\r\n    Promise.all([\r\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n      faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"),\r\n    ]).then(() => {\r\n      this.isloaded = true;\r\n    });\r\n  },\r\n};\r\n</script>"]}]}