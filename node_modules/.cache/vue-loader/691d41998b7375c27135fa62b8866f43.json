{"remainingRequest":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\views\\statsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\views\\statsPage.vue","mtime":1622545708948},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZGIgZnJvbSAiLi9maXJlYmFzZUluaXQiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJzdGF0c1BhZ2UiLA0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc3R1ZGVudHNMaXN0OiBbXSwNCiAgICAgIGRhdGFUb0dldDogew0KICAgICAgICBtYXR0aGF5b206IG51bGwsDQogICAgICAgIHNsYXNoOiBudWxsLA0KICAgICAgICBkYXRlOiBudWxsLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0UXVlcnkoKSB7DQogICAgICBkYi5jb2xsZWN0aW9uKCJzdHVkZW50cyIpDQogICAgICAgIC5vcmRlckJ5KCJzdHVkZW50aWQiLCAiYXNjIikNCiAgICAgICAgLndoZXJlKCJtYXR0aGF5b20iLCAiPT0iLCBOdW1iZXIodGhpcy5kYXRhVG9HZXQubWF0dGhheW9tKSkNCiAgICAgICAgLndoZXJlKCJzbGFzaCIsICI9PSIsIE51bWJlcih0aGlzLmRhdGFUb0dldC5zbGFzaCkpDQogICAgICAgIC5nZXQoKQ0KICAgICAgICAudGhlbigoZG9jcykgPT4gew0KICAgICAgICAgIGRvY3MuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICBjb25zdCBzdHVkZW50RGF0YSA9IHsNCiAgICAgICAgICAgICAgc3R1ZGVudGlkOiBkb2MuZGF0YSgpLnN0dWRlbnRpZCwNCiAgICAgICAgICAgICAgbmFtZTogYCR7ZG9jLmRhdGEoKS5GbmFtZX0gJHtkb2MuZGF0YSgpLkxuYW1lfWAsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy5zdHVkZW50c0xpc3QucHVzaChzdHVkZW50RGF0YSk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5zdHVkZW50c0xpc3QpOw0KICAgICAgICAgIHRoaXMuc3R1ZGVudHNMaXN0LmZvckVhY2goKHN0dWRlbnQpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlbnRlcmVkIik7DQogICAgICAgICAgICB2YXIgdGFibGVyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOyAvLzx0cj48L3RyPg0KICAgICAgICAgICAgdmFyIGlkQ29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGgiKTsgLy88dGQ+PC90ZD4NCiAgICAgICAgICAgIGlkQ29sLnNldEF0dHJpYnV0ZSgic2NvcGUiLCAicm93Iik7DQogICAgICAgICAgICBpZENvbC5jbGFzc05hbWUgPSAiYmctd2hpdGUiDQogICAgICAgICAgICB2YXIgbmFtZUNvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQogICAgICAgICAgICBuYW1lQ29sLmNsYXNzTmFtZSA9ICJiZy13aGl0ZSINCiAgICAgICAgICAgIGlkQ29sLmlubmVySFRNTCA9IGAke3N0dWRlbnQuc3R1ZGVudGlkfWA7IC8vLzx0ZD41MTM1OTwvdGQ+DQogICAgICAgICAgICBuYW1lQ29sLmlubmVySFRNTCA9IGAke3N0dWRlbnQubmFtZX1gOw0KICAgICAgICAgICAgdGFibGVyb3cuYXBwZW5kQ2hpbGQoaWRDb2wpOw0KICAgICAgICAgICAgdGFibGVyb3cuYXBwZW5kQ2hpbGQobmFtZUNvbCk7DQoNCiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMTsgaW5kZXgrKykgew0KICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJtYXR0aGF5b20iKQ0KICAgICAgICAgICAgICAgIC5kb2MoYCR7dGhpcy5kYXRhVG9HZXQubWF0dGhheW9tfS0ke3RoaXMuZGF0YVRvR2V0LnNsYXNofWApDQogICAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oYCR7c3R1ZGVudC5zdHVkZW50aWR9YCkNCiAgICAgICAgICAgICAgICAuZG9jKGAke3RoaXMuZGF0YVRvR2V0LmRhdGV9YCkNCiAgICAgICAgICAgICAgICAuY29sbGVjdGlvbigicGVyaW9kcyIpDQogICAgICAgICAgICAgICAgLmRvYyhgcCR7aW5kZXh9YCkNCiAgICAgICAgICAgICAgICAuZ2V0KCkNCiAgICAgICAgICAgICAgICAudGhlbigoZG9jKSA9PiB7DQogICAgICAgICAgICAgICAgICB2YXIgcGVyaW9kQ29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsNCiAgICAgICAgICAgICAgICAgIGlmIChkb2MuZXhpc3RzKSB7DQogICAgICAgICAgICAgICAgICAgIHBlcmlvZENvbC5pbm5lckhUTUwgPSBgJHtkb2MuZGF0YSgpLnN0YXR1c31gOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZG9jLmRhdGEoKS5zdGF0dXMgPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZENvbC5jbGFzc05hbWUgPSAiYmctc3VjY2VzcyI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGRvYy5kYXRhKCkuc3RhdHVzID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICBwZXJpb2RDb2wuY2xhc3NOYW1lID0gImJnLWRhbmdlciI7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB0YWJsZXJvdy5hcHBlbmRDaGlsZChwZXJpb2RDb2wpOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGVyaW9kQ29sLmlubmVySFRNTCA9ICItIjsNCiAgICAgICAgICAgICAgICAgICAgcGVyaW9kQ29sLmNsYXNzTmFtZSA9ICJiZy13YXJuaW5nIjsNCiAgICAgICAgICAgICAgICAgICAgdGFibGVyb3cuYXBwZW5kQ2hpbGQocGVyaW9kQ29sKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0YWJsZSIpLmFwcGVuZENoaWxkKHRhYmxlcm93KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["statsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"statsPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container p-3\" style=\"background-color: #ffffff\">\r\n      <h3>Student Attendance Status</h3>\r\n      <p>\r\n        Fill in the form to get the data from the database\r\n      </p>\r\n    </div>\r\n\r\n    <div class=\"form-body\">\r\n      <div class=\"container mt-1 bg-white rounded\">\r\n        <div class=\"row d-flex justify-content-start align-items-center p-3\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n              <div class=\"form-holder\">\r\n                <div class=\"form-content\">\r\n                  <div class=\"form-items\">\r\n                    <form ref=\"getStatsForm\" required>\r\n                      <div class=\"custom-control custom-checkbox\">\r\n                        <div class=\"row\">\r\n                          <div class=\"col-lg-3\">\r\n                            <div class=\"input-group mb-1\">\r\n                              <div class=\"input-group-append\">\r\n                                <span class=\"input-group-text\">Matthayom</span>\r\n                              </div>\r\n                              <select\r\n                                required\r\n                                class=\"form-control\"\r\n                                name=\"Matthayom\"\r\n                                v-model=\"dataToGet.matthayom\"\r\n                              >\r\n                                <option value=\"1\">ม.1</option>\r\n                                <option value=\"2\">ม.2</option>\r\n                                <option value=\"3\">ม.3</option>\r\n                                <option value=\"4\">ม.4</option>\r\n                                <option value=\"5\">ม.5</option>\r\n                                <option value=\"6\">ม.6</option>\r\n                              </select>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"col-lg-3\">\r\n                            <div class=\"input-group mb-1\">\r\n                              <div class=\"input-group-append\">\r\n                                <span class=\"input-group-text\">Slash</span>\r\n                              </div>\r\n                              <select\r\n                                required\r\n                                class=\"form-control\"\r\n                                name=\"Slash\"\r\n                                v-model=\"dataToGet.slash\"\r\n                              >\r\n                                <option value=\"1\">/1</option>\r\n                                <option value=\"2\">/2</option>\r\n                                <option value=\"3\">/3</option>\r\n                                <option value=\"4\">/4</option>\r\n                                <option value=\"5\">/5</option>\r\n                                <option value=\"6\">/6</option>\r\n                                <option value=\"7\">/7</option>\r\n                                <option value=\"8\">/8</option>\r\n                                <option value=\"9\">/9</option>\r\n                                <option value=\"10\">/10</option>\r\n                                <option value=\"11\">/11</option>\r\n                                <option value=\"12\">/12</option>\r\n                                <option value=\"13\">/13</option>\r\n                                <option value=\"14\">/14</option>\r\n                                <option value=\"15\">/15</option>\r\n                                <option value=\"16\">/16</option>\r\n                                <option value=\"17\">/17</option>\r\n                                <option value=\"18\">/18</option>\r\n                                <option value=\"19\">/19</option>\r\n                                <option value=\"20\">/20</option>\r\n                              </select>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"col-lg-4\">\r\n                            <div class=\"input-group mb-1\">\r\n                              <div class=\"input-group-append\">\r\n                                <span class=\"input-group-text\">Date</span>\r\n                              </div>\r\n                              <input\r\n                                required\r\n                                type=\"date\"\r\n                                name=\"date\"\r\n                                class=\"form-control\"\r\n                                v-model=\"dataToGet.date\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"col-lg-2 float-right\">\r\n                            <div class=\"d-flex justify-content-center\">\r\n                              <button\r\n                                class=\"btn bg-info text-light\"\r\n                                id=\"SubmitBtn\"\r\n                                type=\"submit\"\r\n                                @click.prevent=\"getQuery\"\r\n                              >\r\n                                Submit\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <div class=\"container-fluid\">\r\n        <div class=\"table-responsive-md\">\r\n          <table\r\n            id=\"table\"\r\n            class=\"table table-bordered table-light\"\r\n          >\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\" rowspan=\"2\">ID</th>\r\n                <th scope=\"col\" rowspan=\"2\">Name</th>\r\n                <th scope=\"col\" colspan=\"11\">Attendance Status</th>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"col\">p0</th>\r\n                <th scope=\"col\">p1</th>\r\n                <th scope=\"col\">p2</th>\r\n                <th scope=\"col\">p3</th>\r\n                <th scope=\"col\">p4</th>\r\n                <th scope=\"col\">p5</th>\r\n                <th scope=\"col\">p6</th>\r\n                <th scope=\"col\">p7</th>\r\n                <th scope=\"col\">p8</th>\r\n                <th scope=\"col\">p9</th>\r\n                <th scope=\"col\">p10</th>\r\n              </tr>\r\n            </thead>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport db from \"./firebaseInit\";\r\n\r\nexport default {\r\n  name: \"statsPage\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      studentsList: [],\r\n      dataToGet: {\r\n        matthayom: null,\r\n        slash: null,\r\n        date: null,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    getQuery() {\r\n      db.collection(\"students\")\r\n        .orderBy(\"studentid\", \"asc\")\r\n        .where(\"matthayom\", \"==\", Number(this.dataToGet.matthayom))\r\n        .where(\"slash\", \"==\", Number(this.dataToGet.slash))\r\n        .get()\r\n        .then((docs) => {\r\n          docs.forEach((doc) => {\r\n            const studentData = {\r\n              studentid: doc.data().studentid,\r\n              name: `${doc.data().Fname} ${doc.data().Lname}`,\r\n            };\r\n            this.studentsList.push(studentData);\r\n          });\r\n          console.log(this.studentsList);\r\n          this.studentsList.forEach((student) => {\r\n            console.log(\"entered\");\r\n            var tablerow = document.createElement(\"tr\"); //<tr></tr>\r\n            var idCol = document.createElement(\"th\"); //<td></td>\r\n            idCol.setAttribute(\"scope\", \"row\");\r\n            idCol.className = \"bg-white\"\r\n            var nameCol = document.createElement(\"td\");\r\n            nameCol.className = \"bg-white\"\r\n            idCol.innerHTML = `${student.studentid}`; ///<td>51359</td>\r\n            nameCol.innerHTML = `${student.name}`;\r\n            tablerow.appendChild(idCol);\r\n            tablerow.appendChild(nameCol);\r\n\r\n            for (let index = 0; index < 11; index++) {\r\n              db.collection(\"matthayom\")\r\n                .doc(`${this.dataToGet.matthayom}-${this.dataToGet.slash}`)\r\n                .collection(`${student.studentid}`)\r\n                .doc(`${this.dataToGet.date}`)\r\n                .collection(\"periods\")\r\n                .doc(`p${index}`)\r\n                .get()\r\n                .then((doc) => {\r\n                  var periodCol = document.createElement(\"td\");\r\n                  if (doc.exists) {\r\n                    periodCol.innerHTML = `${doc.data().status}`;\r\n                    if (doc.data().status == 1) {\r\n                      periodCol.className = \"bg-success\";\r\n                    }\r\n                    if (doc.data().status == 0) {\r\n                      periodCol.className = \"bg-danger\";\r\n                    }\r\n\r\n                    tablerow.appendChild(periodCol);\r\n                  } else {\r\n                    periodCol.innerHTML = \"-\";\r\n                    periodCol.className = \"bg-warning\";\r\n                    tablerow.appendChild(periodCol);\r\n                  }\r\n                });\r\n            }\r\n            document.getElementById(\"table\").appendChild(tablerow);\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}