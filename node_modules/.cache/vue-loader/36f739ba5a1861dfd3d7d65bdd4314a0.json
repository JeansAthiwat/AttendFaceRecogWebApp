{"remainingRequest":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\cameraAndShow.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\cameraAndShow.vue","mtime":1622379732492},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBmYWNlYXBpIGZyb20gImZhY2UtYXBpLmpzIjsNCmltcG9ydCBkYiBmcm9tICIuLi92aWV3cy9maXJlYmFzZUluaXQiOw0KaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImNhbWVyYUFuZFNob3ciLA0KICBjb21wb25lbnRzOiB7fSwNCiAgcHJvcHM6IFsiZGF0YUZvclNvcnQiXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgU2l6ZTogODAwLA0KICAgICAgU2NvcmU6IDAuNiwNCg0KICAgICAgaXNsb2FkZWQ6IGZhbHNlLA0KICAgICAgc29ydHN1Ym1pdDogdHJ1ZSwNCiAgICAgIG1hdGNoZWRwYWlyOiBbXSwNCg0KICAgICAgLy8tLS0tLS0tLS0tLS0gb24gY29kZQ0KICAgICAgc3R1ZGVudHNMaXN0VU5DSEVDS0VEOiBbXSwNCiAgICAgIHN0dWRlbnRzTGlzdENIRUNLRUQ6IFtdLA0KICAgICAgTGFiZWxlZEZhY2VzOiBbXSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIFByb21pc2UuYWxsKFsNCiAgICAgIGZhY2VhcGkubmV0cy50aW55RmFjZURldGVjdG9yLmxvYWRGcm9tVXJpKCIvbW9kZWxzIiksDQogICAgICBmYWNlYXBpLm5ldHMuZmFjZUxhbmRtYXJrNjhOZXQubG9hZEZyb21VcmkoIi9tb2RlbHMiKSwNCiAgICAgIGZhY2VhcGkubmV0cy5mYWNlUmVjb2duaXRpb25OZXQubG9hZEZyb21VcmkoIi9tb2RlbHMiKSwNCiAgICBdKS50aGVuKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRMYWJlbEZyb21EQigpIHsNCiAgICAgIGRiLmNvbGxlY3Rpb24oInN0dWRlbnRzIikNCiAgICAgICAgLndoZXJlKCJtYXR0aGF5b20iLCAiPT0iLCBOdW1iZXIodGhpcy5kYXRhRm9yU29ydC5tYXR0aGF5b20pKQ0KICAgICAgICAud2hlcmUoInNsYXNoIiwgIj09IiwgTnVtYmVyKHRoaXMuZGF0YUZvclNvcnQuc2xhc2gpKQ0KICAgICAgICAuZ2V0KCkNCiAgICAgICAgLnRoZW4oKHF1ZXJ5U25hcHNob3RzKSA9PiB7DQogICAgICAgICAgcXVlcnlTbmFwc2hvdHMuZm9yRWFjaCgoZG9jKSA9PiB7DQogICAgICAgICAgICBjb25zdCBwYXJzZWREZXNjcmlwdG9ycyA9IFtdOw0KICAgICAgICAgICAgLyppZiAoDQogICAgICAgICAgICAgIGRvYy5kYXRhKCkubWF0dGhheW9tID09IHRoaXMuZGF0YUZvclNvcnQubWF0dGhheW9tICYmDQogICAgICAgICAgICAgIGRvYy5kYXRhKCkuc2xhc2ggPT0gdGhpcy5kYXRhRm9yU29ydC5zbGFzaA0KICAgICAgICAgICAgKSB7Ki8NCiAgICAgICAgICAgIHRoaXMuc3R1ZGVudHNMaXN0VU5DSEVDS0VELnB1c2goZG9jLmRhdGEoKS5zdHVkZW50aWQpOw0KICAgICAgICAgICAgZG9jLmRhdGEoKS5kZXNjcmlwdG9ycy5mb3JFYWNoKChkZXNjcmlwdG9yKSA9PiB7DQogICAgICAgICAgICAgIHBhcnNlZERlc2NyaXB0b3JzLnB1c2gobmV3IEZsb2F0MzJBcnJheShKU09OLnBhcnNlKGRlc2NyaXB0b3IpKSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuTGFiZWxlZEZhY2VzLnB1c2goDQogICAgICAgICAgICAgIG5ldyBmYWNlYXBpLkxhYmVsZWRGYWNlRGVzY3JpcHRvcnMoDQogICAgICAgICAgICAgICAgZG9jLmRhdGEoKS5zdHVkZW50aWQsDQogICAgICAgICAgICAgICAgcGFyc2VkRGVzY3JpcHRvcnMNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIC8qfSBlbHNlIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIkdldERlc2NyaXB0b3JzRmFpbGVkIik7DQogICAgICAgICAgICB9Ki8NCiAgICAgICAgICB9KTsNCiAgICAgICAgICBjb25zb2xlLmxvZygibGFiZWxlZEZBQ0VTIiwgdGhpcy5MYWJlbGVkRmFjZXMpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCJzdHVkZW50c0xpc3RVTkNIRUNLRUQiLCB0aGlzLnN0dWRlbnRzTGlzdFVOQ0hFQ0tFRCk7DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKHRoaXMuaXNsb2FkZWQgPSB0cnVlKTsNCiAgICB9LA0KICAgIGZyb250KCkgew0KICAgICAgY29uc3QgY29uc3RyYWludHMgPSAod2luZG93LmNvbnN0cmFpbnRzID0gew0KICAgICAgICBhdWRpbzogZmFsc2UsDQogICAgICAgIHZpZGVvOiB0cnVlLA0KICAgICAgfSk7DQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzDQogICAgICAgIC5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpDQogICAgICAgIC50aGVuKChzdHJlYW0pID0+IHsNCiAgICAgICAgICB0aGlzLnNvcnRzdWJtaXQgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuJHJlZnMubGl2ZXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4odGhpcy5GYWNlRGV0ZWN0KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgdGhpcy5zb3J0c3VibWl0ID0gZmFsc2U7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHJlYXIoKSB7DQogICAgICBjb25zdCBjb25zdHJhaW50cyA9ICh3aW5kb3cuY29uc3RyYWludHMgPSB7DQogICAgICAgIGF1ZGlvOiBmYWxzZSwNCiAgICAgICAgdmlkZW86IHtmYWNpbmdNb2RlOiB7ZXhhY3Q6ICdlbnZpcm9ubWVudCd9fQ0KICAgICAgfSk7DQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzDQogICAgICAgIC5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpDQogICAgICAgIC50aGVuKChzdHJlYW0pID0+IHsNCiAgICAgICAgICB0aGlzLnNvcnRzdWJtaXQgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuJHJlZnMubGl2ZXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4odGhpcy5GYWNlRGV0ZWN0KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgdGhpcy5zb3J0c3VibWl0ID0gZmFsc2U7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIEZhY2VEZXRlY3QoKSB7DQogICAgICBjb25zdCBmYWNlTWF0Y2hlciA9IG5ldyBmYWNlYXBpLkZhY2VNYXRjaGVyKHRoaXMuTGFiZWxlZEZhY2VzKTsNCiAgICAgIA0KICAgICAgc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gew0KICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBmYWNlYXBpLlRpbnlGYWNlRGV0ZWN0b3JPcHRpb25zKHsNCiAgICAgICAgaW5wdXRTaXplOiBOdW1iZXIodGhpcy5TaXplKSwNCiAgICAgICAgc2NvcmVUaHJlc2hvbGQ6IE51bWJlcih0aGlzLlNjb3JlKSAsDQogICAgICB9KTsNCiAgICAgICAgY29uc3QgZGV0ZWN0aW9ucyA9IGF3YWl0IGZhY2VhcGkNCiAgICAgICAgICAuZGV0ZWN0QWxsRmFjZXMoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZGVvIiksIG9wdGlvbnMpDQogICAgICAgICAgLndpdGhGYWNlTGFuZG1hcmtzKCkNCiAgICAgICAgICAud2l0aEZhY2VEZXNjcmlwdG9ycygpOw0KICAgICAgICAvL2NvbnNvbGUubG9nKCdDQU1kZXRlY3Rpb25zIDonLCBkZXRlY3Rpb25zKTsNCiAgICAgICAgZGV0ZWN0aW9ucy5mb3JFYWNoKGFzeW5jIChkZXRlY3Rpb24pID0+IHsNCiAgICAgICAgICBjb25zdCBiZXN0TWF0Y2ggPSBhd2FpdCBmYWNlTWF0Y2hlci5maW5kQmVzdE1hdGNoKGRldGVjdGlvbi5kZXNjcmlwdG9yKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhiZXN0TWF0Y2gudG9TdHJpbmcoKSk7DQogICAgICAgICAgY29uc29sZS5sb2coYmVzdE1hdGNoLmRpc3RhbmNlKQ0KICAgICAgICAgIHRoaXMubWF0Y2hlZHBhaXIucHVzaChiZXN0TWF0Y2gudG9TdHJpbmcoKSk7DQogICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUNIZUNLICYgVU5jaGVjayBMaXN0IG1hbmFnZXINCiAgICAgICAgICB0aGlzLnN0dWRlbnRzTGlzdFVOQ0hFQ0tFRC5mb3JFYWNoKCh1bmNoZWNrU3R1ZGVudCkgPT4gew0KICAgICAgICAgICAgaWYgKHVuY2hlY2tTdHVkZW50ID09IGJlc3RNYXRjaC50b1N0cmluZyhmYWxzZSkpIHsNCiAgICAgICAgICAgICAgdGhpcy5zdHVkZW50c0xpc3RDSEVDS0VELnB1c2godW5jaGVja1N0dWRlbnQpOw0KICAgICAgICAgICAgICB0aGlzLnN0dWRlbnRzTGlzdFVOQ0hFQ0tFRCA9IHRoaXMuc3R1ZGVudHNMaXN0VU5DSEVDS0VELmZpbHRlcigNCiAgICAgICAgICAgICAgICAodmFsdWUpID0+IHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPSB1bmNoZWNrU3R1ZGVudDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBjb25zb2xlLmxvZygiZW5kIDEgbG9vcCIpOw0KICAgICAgfSwgMzAwKTsNCiAgICAgIA0KICAgIH0sDQogICAgc2V0UmVnY29nbml6ZWREYXRhKCkgew0KICAgICAgdGhpcy5zdHVkZW50c0xpc3RDSEVDS0VELmZvckVhY2goKGNoZWNrZWRzdHVkZW50aWQpID0+IHsNCiAgICAgICAgdGhpcy5kYXRhRm9yU29ydC5wZXJpb2RzLmZvckVhY2goKHBlcmlvZCkgPT4gew0KICAgICAgICAgIGRiLmNvbGxlY3Rpb24oIm1hdHRoYXlvbSIpDQogICAgICAgICAgICAuZG9jKGAke3RoaXMuZGF0YUZvclNvcnQubWF0dGhheW9tfS0ke3RoaXMuZGF0YUZvclNvcnQuc2xhc2h9YCkNCiAgICAgICAgICAgIC5jb2xsZWN0aW9uKGAke2NoZWNrZWRzdHVkZW50aWR9YCkNCiAgICAgICAgICAgIC5kb2MoYCR7dGhpcy5kYXRhRm9yU29ydC5kYXRlfWApDQogICAgICAgICAgICAuY29sbGVjdGlvbigicGVyaW9kcyIpDQogICAgICAgICAgICAuZG9jKGBwJHtwZXJpb2R9YCkNCiAgICAgICAgICAgIC5zZXQoDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwZXJpb2Q6IHBlcmlvZCwNCiAgICAgICAgICAgICAgICBzdGF0dXM6IDEsIC8vLS0tLS0tLS0tLS0tLS0tLS0qQ1VNTU1NTU0qDQogICAgICAgICAgICAgICAgc3ViamVjdDogdGhpcy5kYXRhRm9yU29ydC5zdWJqZWN0LA0KICAgICAgICAgICAgICAgIHRpbWU6IGZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSksDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIHsgbWVyZ2U6IHRydWUgfQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCg0KICAgICAgdGhpcy5zdHVkZW50c0xpc3RVTkNIRUNLRUQuZm9yRWFjaCgoYWJzZW50c3R1ZGVudGlkKSA9PiB7DQogICAgICAgIHRoaXMuZGF0YUZvclNvcnQucGVyaW9kcy5mb3JFYWNoKChwZXJpb2QpID0+IHsNCiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJtYXR0aGF5b20iKQ0KICAgICAgICAgICAgLmRvYyhgJHt0aGlzLmRhdGFGb3JTb3J0Lm1hdHRoYXlvbX0tJHt0aGlzLmRhdGFGb3JTb3J0LnNsYXNofWApDQogICAgICAgICAgICAuY29sbGVjdGlvbihgJHthYnNlbnRzdHVkZW50aWR9YCkNCiAgICAgICAgICAgIC5kb2MoYCR7dGhpcy5kYXRhRm9yU29ydC5kYXRlfWApDQogICAgICAgICAgICAuY29sbGVjdGlvbigicGVyaW9kcyIpDQogICAgICAgICAgICAuZG9jKGBwJHtwZXJpb2R9YCkNCiAgICAgICAgICAgIC5zZXQoDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwZXJpb2Q6IHBlcmlvZCwNCiAgICAgICAgICAgICAgICBzdGF0dXM6IDAsIC8vLS0tLS0tLS0tLS1BQlNFTlQNCiAgICAgICAgICAgICAgICBzdWJqZWN0OiB0aGlzLmRhdGFGb3JTb3J0LnN1YmplY3QsDQogICAgICAgICAgICAgICAgdGltZTogZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZSgpKSwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgeyBtZXJnZTogdHJ1ZSB9DQogICAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["cameraAndShow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cameraAndShow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"GetButton\">\r\n      <label for=\"inpsize\">Input size : </label><input type=\"number\" name=\"inpsize\" v-model=\"Size\">\r\n    <label for=\"confi\"></label><input type=\"number\" name=\"confi\" v-model=\"Score\" max='0.99' min='0.01' step=\"0.05\">\r\n      <button v-show=\"isloaded\" @click=\"front\"> GET FRONT CAM</button>\r\n          <button v-show=\"isloaded\" @click=\"rear\">GET REAR CAM</button>\r\n      <button @click.prevent=\"getLabelFromDB\">Submit</button>\r\n      \r\n      \r\n\r\n    </div>\r\n\r\n    <div id=\"Camera\">\r\n      <video\r\n        v-show=\"isloaded\"\r\n        id=\"video\"\r\n        ref=\"livevideo\"\r\n        :width=\"640\"\r\n        :height=\"480\"\r\n        autoplay\r\n      ></video>\r\n      <button @click.prevent=\"setRegcognizedData\">Upload Data</button>\r\n    </div>\r\n\r\n    <div id=\"Showlabeled\">\r\n      \r\n      Unchecked : {{ studentsListUNCHECKED }} Checked :\r\n      {{ studentsListCHECKED }}\r\n\r\n      MATCHED {{ matchedpair }}\r\n\r\n    </div>\r\n\r\n    <div></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as faceapi from \"face-api.js\";\r\nimport db from \"../views/firebaseInit\";\r\nimport firebase from \"firebase\";\r\nexport default {\r\n  name: \"cameraAndShow\",\r\n  components: {},\r\n  props: [\"dataForSort\"],\r\n  data() {\r\n    return {\r\n      Size: 800,\r\n      Score: 0.6,\r\n\r\n      isloaded: false,\r\n      sortsubmit: true,\r\n      matchedpair: [],\r\n\r\n      //------------ on code\r\n      studentsListUNCHECKED: [],\r\n      studentsListCHECKED: [],\r\n      LabeledFaces: [],\r\n    };\r\n  },\r\n  created() {\r\n    Promise.all([\r\n      faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n    ]).then();\r\n  },\r\n  methods: {\r\n    getLabelFromDB() {\r\n      db.collection(\"students\")\r\n        .where(\"matthayom\", \"==\", Number(this.dataForSort.matthayom))\r\n        .where(\"slash\", \"==\", Number(this.dataForSort.slash))\r\n        .get()\r\n        .then((querySnapshots) => {\r\n          querySnapshots.forEach((doc) => {\r\n            const parsedDescriptors = [];\r\n            /*if (\r\n              doc.data().matthayom == this.dataForSort.matthayom &&\r\n              doc.data().slash == this.dataForSort.slash\r\n            ) {*/\r\n            this.studentsListUNCHECKED.push(doc.data().studentid);\r\n            doc.data().descriptors.forEach((descriptor) => {\r\n              parsedDescriptors.push(new Float32Array(JSON.parse(descriptor)));\r\n            });\r\n            this.LabeledFaces.push(\r\n              new faceapi.LabeledFaceDescriptors(\r\n                doc.data().studentid,\r\n                parsedDescriptors\r\n              )\r\n            );\r\n            /*} else {\r\n              console.log(\"GetDescriptorsFailed\");\r\n            }*/\r\n          });\r\n          console.log(\"labeledFACES\", this.LabeledFaces);\r\n          console.log(\"studentsListUNCHECKED\", this.studentsListUNCHECKED);\r\n        })\r\n        .then(this.isloaded = true);\r\n    },\r\n    front() {\r\n      const constraints = (window.constraints = {\r\n        audio: false,\r\n        video: true,\r\n      });\r\n      navigator.mediaDevices\r\n        .getUserMedia(constraints)\r\n        .then((stream) => {\r\n          this.sortsubmit = true;\r\n          this.$refs.livevideo.srcObject = stream;\r\n        })\r\n        .then(this.FaceDetect)\r\n        .catch((error) => {\r\n          this.sortsubmit = false;\r\n          console.log(error);\r\n        });\r\n    },\r\n    rear() {\r\n      const constraints = (window.constraints = {\r\n        audio: false,\r\n        video: {facingMode: {exact: 'environment'}}\r\n      });\r\n      navigator.mediaDevices\r\n        .getUserMedia(constraints)\r\n        .then((stream) => {\r\n          this.sortsubmit = true;\r\n          this.$refs.livevideo.srcObject = stream;\r\n        })\r\n        .then(this.FaceDetect)\r\n        .catch((error) => {\r\n          this.sortsubmit = false;\r\n          console.log(error);\r\n        });\r\n    },\r\n    async FaceDetect() {\r\n      const faceMatcher = new faceapi.FaceMatcher(this.LabeledFaces);\r\n      \r\n      setInterval(async () => {\r\n        var options = new faceapi.TinyFaceDetectorOptions({\r\n        inputSize: Number(this.Size),\r\n        scoreThreshold: Number(this.Score) ,\r\n      });\r\n        const detections = await faceapi\r\n          .detectAllFaces(document.getElementById(\"video\"), options)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptors();\r\n        //console.log('CAMdetections :', detections);\r\n        detections.forEach(async (detection) => {\r\n          const bestMatch = await faceMatcher.findBestMatch(detection.descriptor);\r\n          console.log(bestMatch.toString());\r\n          console.log(bestMatch.distance)\r\n          this.matchedpair.push(bestMatch.toString());\r\n          //--------------------------CHeCK & UNcheck List manager\r\n          this.studentsListUNCHECKED.forEach((uncheckStudent) => {\r\n            if (uncheckStudent == bestMatch.toString(false)) {\r\n              this.studentsListCHECKED.push(uncheckStudent);\r\n              this.studentsListUNCHECKED = this.studentsListUNCHECKED.filter(\r\n                (value) => {\r\n                  return value != uncheckStudent;\r\n                }\r\n              );\r\n            }\r\n          });\r\n        });\r\n        console.log(\"end 1 loop\");\r\n      }, 300);\r\n      \r\n    },\r\n    setRegcognizedData() {\r\n      this.studentsListCHECKED.forEach((checkedstudentid) => {\r\n        this.dataForSort.periods.forEach((period) => {\r\n          db.collection(\"matthayom\")\r\n            .doc(`${this.dataForSort.matthayom}-${this.dataForSort.slash}`)\r\n            .collection(`${checkedstudentid}`)\r\n            .doc(`${this.dataForSort.date}`)\r\n            .collection(\"periods\")\r\n            .doc(`p${period}`)\r\n            .set(\r\n              {\r\n                period: period,\r\n                status: 1, //-----------------*CUMMMMMM*\r\n                subject: this.dataForSort.subject,\r\n                time: firebase.firestore.Timestamp.fromDate(new Date()),\r\n              },\r\n              { merge: true }\r\n            );\r\n        });\r\n      });\r\n\r\n      this.studentsListUNCHECKED.forEach((absentstudentid) => {\r\n        this.dataForSort.periods.forEach((period) => {\r\n          db.collection(\"matthayom\")\r\n            .doc(`${this.dataForSort.matthayom}-${this.dataForSort.slash}`)\r\n            .collection(`${absentstudentid}`)\r\n            .doc(`${this.dataForSort.date}`)\r\n            .collection(\"periods\")\r\n            .doc(`p${period}`)\r\n            .set(\r\n              {\r\n                period: period,\r\n                status: 0, //-----------ABSENT\r\n                subject: this.dataForSort.subject,\r\n                time: firebase.firestore.Timestamp.fromDate(new Date()),\r\n              },\r\n              { merge: true }\r\n            );\r\n        });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n"]}]}