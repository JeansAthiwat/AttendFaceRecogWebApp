{"remainingRequest":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\views\\statsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\views\\statsPage.vue","mtime":1622209226197},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZGIgZnJvbSAiLi9maXJlYmFzZUluaXQiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJzdGF0c1BhZ2UiLA0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc3R1ZGVudHNMaXN0OiBbXSwNCiAgICAgIGRhdGFUb0dldDogew0KICAgICAgICBtYXR0aGF5b206IG51bGwsDQogICAgICAgIHNsYXNoOiBudWxsLA0KICAgICAgICBkYXRlOiBudWxsLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0UXVlcnkoKSB7DQogICAgICBkYi5jb2xsZWN0aW9uKCJzdHVkZW50cyIpLm9yZGVyQnkoInN0dWRlbnRpZCIsICJhc2MiKQ0KICAgICAgICAud2hlcmUoIm1hdHRoYXlvbSIsICI9PSIsIE51bWJlcih0aGlzLmRhdGFUb0dldC5tYXR0aGF5b20pKQ0KICAgICAgICAud2hlcmUoInNsYXNoIiwgIj09IiwgTnVtYmVyKHRoaXMuZGF0YVRvR2V0LnNsYXNoKSkNCiAgICAgICAgLmdldCgpDQogICAgICAgIC50aGVuKChkb2NzKSA9PiB7DQogICAgICAgICAgZG9jcy5mb3JFYWNoKChkb2MpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnREYXRhID0gew0KICAgICAgICAgICAgICBzdHVkZW50aWQ6IGRvYy5kYXRhKCkuc3R1ZGVudGlkLA0KICAgICAgICAgICAgICBuYW1lOiBgJHtkb2MuZGF0YSgpLkZuYW1lfSAke2RvYy5kYXRhKCkuTG5hbWV9YCwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0aGlzLnN0dWRlbnRzTGlzdC5wdXNoKHN0dWRlbnREYXRhKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0dWRlbnRzTGlzdCk7DQogICAgICAgICAgdGhpcy5zdHVkZW50c0xpc3QuZm9yRWFjaCgoc3R1ZGVudCkgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coImVudGVyZWQiKTsNCiAgICAgICAgICAgIHZhciB0YWJsZXJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7IC8vPHRyPjwvdHI+DQogICAgICAgICAgICB2YXIgaWRDb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOyAvLzx0ZD48L3RkPg0KICAgICAgICAgICAgdmFyIG5hbWVDb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KICAgICAgICAgICAgaWRDb2wuaW5uZXJIVE1MID0gYCR7c3R1ZGVudC5zdHVkZW50aWR9YDsgLy8vPHRkPjUxMzU5PC90ZD4NCiAgICAgICAgICAgIG5hbWVDb2wuaW5uZXJIVE1MID0gYCR7c3R1ZGVudC5uYW1lfWA7DQogICAgICAgICAgICB0YWJsZXJvdy5hcHBlbmRDaGlsZChpZENvbCk7IA0KICAgICAgICAgICAgdGFibGVyb3cuYXBwZW5kQ2hpbGQobmFtZUNvbCk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGFibGUiKS5hcHBlbmRDaGlsZCh0YWJsZXJvdyk7DQoNCiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMTsgaW5kZXgrKykgew0KICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJtYXR0aGF5b20iKQ0KICAgICAgICAgICAgICAuZG9jKGAke3RoaXMuZGF0YVRvR2V0Lm1hdHRoYXlvbX0tJHt0aGlzLmRhdGFUb0dldC5zbGFzaH1gKQ0KICAgICAgICAgICAgICAuY29sbGVjdGlvbihgJHtzdHVkZW50LnN0dWRlbnRpZH1gKQ0KICAgICAgICAgICAgICAuZG9jKGAke3RoaXMuZGF0YVRvR2V0LmRhdGV9YCkNCiAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oInBlcmlvZHMiKQ0KICAgICAgICAgICAgICAuZG9jKGBwJHtpbmRleH1gKQ0KICAgICAgICAgICAgICAuZ2V0KCkNCiAgICAgICAgICAgICAgLnRoZW4oKGRvYykgPT4gew0KICAgICAgICAgICAgICAgIHZhciBwZXJpb2RDb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpDQogICAgICAgICAgICAgICAgaWYoZG9jLmV4aXN0cykgew0KICAgICAgICAgICAgICAgICAgcGVyaW9kQ29sLmlubmVySFRNTCA9IGAke2RvYy5kYXRhKCkuc3RhdHVzfWANCiAgICAgICAgICAgICAgICAgIHRhYmxlcm93LmFwcGVuZENoaWxkKHBlcmlvZENvbCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgIHBlcmlvZENvbC5pbm5lckhUTUwgPSAnLScNCiAgICAgICAgICAgICAgICAgIHRhYmxlcm93LmFwcGVuZENoaWxkKHBlcmlvZENvbCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["statsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"statsPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <form>\r\n        <label>ระดับชั้น (ม.) :</label\r\n        ><select v-model=\"dataToGet.matthayom\">\r\n          <option value=\"1\">ม.1</option>\r\n          <option value=\"2\">ม.2</option>\r\n          <option value=\"3\">ม.3</option>\r\n          <option value=\"4\">ม.4</option>\r\n          <option value=\"5\">ม.5</option>\r\n          <option value=\"6\">ม.6</option>\r\n        </select>\r\n        <span> | </span>\r\n        <label>ห้อง (/xx) :</label\r\n        ><select v-model=\"dataToGet.slash\">\r\n          <option value=\"1\">/1</option>\r\n          <option value=\"2\">/2</option>\r\n          <option value=\"3\">/3</option>\r\n          <option value=\"4\">/4</option>\r\n          <option value=\"5\">/5</option>\r\n          <option value=\"6\">/6</option>\r\n          <option value=\"7\">/7</option>\r\n          <option value=\"8\">/8</option>\r\n          <option value=\"9\">/9</option>\r\n          <option value=\"10\">/10</option>\r\n          <option value=\"11\">/11</option>\r\n          <option value=\"12\">/12</option>\r\n          <option value=\"13\">/13</option>\r\n          <option value=\"14\">/14</option>\r\n          <option value=\"15\">/15</option>\r\n          <option value=\"16\">/16</option>\r\n          <option value=\"17\">/17</option>\r\n          <option value=\"18\">/18</option>\r\n          <option value=\"19\">/19</option>\r\n          <option value=\"20\">/20 สุดหล่อเท่ห์</option>\r\n        </select>\r\n        <input type=\"date\" v-model=\"dataToGet.date\" />\r\n        <button @click=\"getQuery\">Click Me To get STATS</button>\r\n      </form>\r\n    </div>\r\n    <div>\r\n      <table id=\"table\" border>\r\n        <tr>\r\n          <th rowspan=\"2\">StudentID</th>\r\n          <th rowspan=\"2\">Name</th>\r\n          <th colspan=\"11\">Attendance Status</th>\r\n        </tr>\r\n        <tr>\r\n          <th>p0</th>\r\n          <th>p1</th>\r\n          <th>p2</th>\r\n          <th>p3</th>\r\n          <th>p4</th>\r\n          <th>p5</th>\r\n          <th>p6</th>\r\n          <th>p7</th>\r\n          <th>p8</th>\r\n          <th>p9</th>\r\n          <th>p10</th>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport db from \"./firebaseInit\";\r\n\r\nexport default {\r\n  name: \"statsPage\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      studentsList: [],\r\n      dataToGet: {\r\n        matthayom: null,\r\n        slash: null,\r\n        date: null,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    getQuery() {\r\n      db.collection(\"students\").orderBy(\"studentid\", \"asc\")\r\n        .where(\"matthayom\", \"==\", Number(this.dataToGet.matthayom))\r\n        .where(\"slash\", \"==\", Number(this.dataToGet.slash))\r\n        .get()\r\n        .then((docs) => {\r\n          docs.forEach((doc) => {\r\n            const studentData = {\r\n              studentid: doc.data().studentid,\r\n              name: `${doc.data().Fname} ${doc.data().Lname}`,\r\n            };\r\n            this.studentsList.push(studentData);\r\n          });\r\n          console.log(this.studentsList);\r\n          this.studentsList.forEach((student) => {\r\n            console.log(\"entered\");\r\n            var tablerow = document.createElement(\"tr\"); //<tr></tr>\r\n            var idCol = document.createElement(\"td\"); //<td></td>\r\n            var nameCol = document.createElement(\"td\");\r\n            idCol.innerHTML = `${student.studentid}`; ///<td>51359</td>\r\n            nameCol.innerHTML = `${student.name}`;\r\n            tablerow.appendChild(idCol); \r\n            tablerow.appendChild(nameCol);\r\n            document.getElementById(\"table\").appendChild(tablerow);\r\n\r\n            for (let index = 0; index < 11; index++) {\r\n              db.collection(\"matthayom\")\r\n              .doc(`${this.dataToGet.matthayom}-${this.dataToGet.slash}`)\r\n              .collection(`${student.studentid}`)\r\n              .doc(`${this.dataToGet.date}`)\r\n              .collection(\"periods\")\r\n              .doc(`p${index}`)\r\n              .get()\r\n              .then((doc) => {\r\n                var periodCol = document.createElement('td')\r\n                if(doc.exists) {\r\n                  periodCol.innerHTML = `${doc.data().status}`\r\n                  tablerow.appendChild(periodCol)\r\n                }\r\n                else{\r\n                  periodCol.innerHTML = '-'\r\n                  tablerow.appendChild(periodCol)\r\n                }\r\n              });\r\n            }\r\n            \r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}