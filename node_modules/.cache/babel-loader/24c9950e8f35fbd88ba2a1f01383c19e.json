{"remainingRequest":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\thread-loader\\dist\\cjs.js!D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js!D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\addUserImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\src\\components\\addUserImage.vue","mtime":1622175135117},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webProject\\realwork\\build002\\attendfaceregv02\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDovd2ViUHJvamVjdC9yZWFsd29yay9idWlsZDAwMi9hdHRlbmRmYWNlcmVndjAyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovd2ViUHJvamVjdC9yZWFsd29yay9idWlsZDAwMi9hdHRlbmRmYWNlcmVndjAyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgKiBhcyBmYWNlYXBpIGZyb20gImZhY2UtYXBpLmpzIjsKZmFjZWFwaS5lbnYubW9ua2V5UGF0Y2goewogIENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsCiAgSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsCiAgSW1hZ2VEYXRhOiBJbWFnZURhdGEsCiAgVmlkZW86IEhUTUxWaWRlb0VsZW1lbnQsCiAgY3JlYXRlQ2FudmFzRWxlbWVudDogZnVuY3Rpb24gY3JlYXRlQ2FudmFzRWxlbWVudCgpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICB9LAogIGNyZWF0ZUltYWdlRWxlbWVudDogZnVuY3Rpb24gY3JlYXRlSW1hZ2VFbGVtZW50KCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkVXNlckltYWdlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNsb2FkZWQ6IGZhbHNlLAogICAgICBmaWxlczogW10sCiAgICAgIGRlc2NyaXB0b3JzanNvbjogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmV2aWV3UGljczogZnVuY3Rpb24gcHJldmlld1BpY3MoKSB7CiAgICAgIHRoaXMuZ2V0RGVzY3JpcHRvcigpOwogICAgfSwKICAgIGdldERlc2NyaXB0b3I6IGZ1bmN0aW9uIGdldERlc2NyaXB0b3IoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBpbmRleCwgdG9pbWFnZSwgZGV0ZWN0aW9uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VmaWxlcycpLmZpbGVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmYWNlYXBpLmJ1ZmZlclRvSW1hZ2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltYWdlZmlsZXMiKS5maWxlc1tpbmRleF0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0b2ltYWdlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGZhY2VhcGkuZGV0ZWN0U2luZ2xlRmFjZSh0b2ltYWdlKS53aXRoRmFjZUxhbmRtYXJrcygpLndpdGhGYWNlRGVzY3JpcHRvcigpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBkZXRlY3Rpb24gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIF90aGlzLmRlc2NyaXB0b3JzanNvbi5wdXNoKEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oZGV0ZWN0aW9uLmRlc2NyaXB0b3IpKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2FsbGltZ3VwbG9hZGVkJywgX3RoaXMuZGVzY3JpcHRvcnNqc29uKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5kZXNjcmlwdG9yc2pzb24gPSBbXTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90eXBlb2YoX3RoaXMuZGVzY3JpcHRvcnNqc29uKSwgX3RoaXMuZGVzY3JpcHRvcnNqc29uKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBQcm9taXNlLmFsbChbZmFjZWFwaS5uZXRzLmZhY2VMYW5kbWFyazY4TmV0LmxvYWRGcm9tVXJpKCIvbW9kZWxzIiksIGZhY2VhcGkubmV0cy5mYWNlUmVjb2duaXRpb25OZXQubG9hZEZyb21VcmkoIi9tb2RlbHMiKSwgZmFjZWFwaS5uZXRzLnNzZE1vYmlsZW5ldHYxLmxvYWRGcm9tVXJpKCIvbW9kZWxzIildKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMyLmlzbG9hZGVkID0gdHJ1ZTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["addUserImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAcA,OAAA,KAAA,OAAA,MAAA,aAAA;AACA,OAAA,CAAA,GAAA,CAAA,WAAA,CAAA;AACA,EAAA,MAAA,EAAA,iBADA;AAEA,EAAA,KAAA,EAAA,gBAFA;AAGA,EAAA,SAAA,EAAA,SAHA;AAIA,EAAA,KAAA,EAAA,gBAJA;AAKA,EAAA,mBAAA,EAAA;AAAA,WAAA,QAAA,CAAA,aAAA,CAAA,QAAA,CAAA;AAAA,GALA;AAMA,EAAA,kBAAA,EAAA;AAAA,WAAA,QAAA,CAAA,aAAA,CAAA,KAAA,CAAA;AAAA;AANA,CAAA;AAQA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,eAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,aAAA;AACA,KAHA;AAIA,IAAA,aAJA,2BAIA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAFA,GAEA,CAFA;;AAAA;AAAA,sBAEA,KAAA,GAAA,QAAA,CAAA,cAAA,CAAA,YAAA,EAAA,KAAA,CAAA,MAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAGA,OAAA,CAAA,aAAA,CACA,QAAA,CAAA,cAAA,CAAA,YAAA,EAAA,KAAA,CAAA,KAAA,CADA,CAHA;;AAAA;AAGA,gBAAA,OAHA;AAAA;AAAA,uBAMA,OAAA,CACA,gBADA,CACA,OADA,EAEA,iBAFA,GAGA,kBAHA,EANA;;AAAA;AAMA,gBAAA,SANA;;AAUA,gBAAA,KAAA,CAAA,eAAA,CAAA,IAAA,CACA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,UAAA,CAAA,CADA;;AAVA;AAEA,gBAAA,KAAA,EAFA;AAAA;AAAA;;AAAA;AAcA,gBAAA,KAAA,CAAA,KAAA,CAAA,gBAAA,EAAA,KAAA,CAAA,eAAA;;AACA,gBAAA,KAAA,CAAA,eAAA,GAAA,EAAA;AACA,gBAAA,OAAA,CAAA,GAAA,SAAA,KAAA,CAAA,eAAA,GAAA,KAAA,CAAA,eAAA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AArBA,GATA;AAgCA,EAAA,OAhCA,qBAgCA;AAAA;;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,CACA,OAAA,CAAA,IAAA,CAAA,iBAAA,CAAA,WAAA,CAAA,SAAA,CADA,EAEA,OAAA,CAAA,IAAA,CAAA,kBAAA,CAAA,WAAA,CAAA,SAAA,CAFA,EAGA,OAAA,CAAA,IAAA,CAAA,cAAA,CAAA,WAAA,CAAA,SAAA,CAHA,CAAA,EAIA,IAJA,CAIA,YAAA;AAAA,MAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AAAA,KAJA;AAKA;AAtCA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <input v-show=\"isloaded\"\r\n      type=\"file\"\r\n      id=\"imagefiles\"\r\n      ref=\"myfiles\"\r\n      @change=\"previewPics\"\r\n      multiple\r\n      accept=\"image/*,.jpg,.jpeg,.png\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as faceapi from \"face-api.js\";\r\nfaceapi.env.monkeyPatch({\r\n  Canvas: HTMLCanvasElement,\r\n  Image: HTMLImageElement,\r\n  ImageData: ImageData,\r\n  Video: HTMLVideoElement,\r\n  createCanvasElement: () => document.createElement(\"canvas\"),\r\n  createImageElement: () => document.createElement(\"img\"),\r\n});\r\nexport default {\r\n  name: \"addUserImage\",\r\n  data() {\r\n    return {\r\n      isloaded: false,\r\n      files: [],\r\n      descriptorsjson: [],\r\n    };\r\n  },\r\n  methods: {\r\n    previewPics() {\r\n      this.getDescriptor();\r\n    },\r\n    async getDescriptor() {\r\n      // const imageupload = document.getElementById('imagefiles')\r\n      for (let index = 0; index < document.getElementById('imagefiles').files.length; index++) {\r\n        const toimage = await faceapi.bufferToImage(\r\n          document.getElementById(\"imagefiles\").files[index]\r\n        );\r\n        const detection = await faceapi\r\n          .detectSingleFace(toimage)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor();\r\n        this.descriptorsjson.push(\r\n          JSON.stringify(Array.from(detection.descriptor))\r\n        );\r\n      }\r\n      this.$emit('allimguploaded', this.descriptorsjson);\r\n      this.descriptorsjson = []\r\n      console.log(typeof this.descriptorsjson,this.descriptorsjson)\r\n    },\r\n  },\r\n  created() {\r\n    Promise.all([\r\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n      faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"),\r\n    ]).then(() => {this.isloaded = true});\r\n  },\r\n};\r\n</script>"],"sourceRoot":"src/components"}]}